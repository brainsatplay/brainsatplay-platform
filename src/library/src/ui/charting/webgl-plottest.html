<!DOCTYPE html>
<head>
    <style>
        body {
            background-color: rgb(0.1, 0.1, 0.1);
            color: white;
            font-family: Arial, Helvetica, sans-serif;
        }

        .canvas {
            width: 100%;
            height: 70vh;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/gh/danchitnis/webgl-plot@master/dist/webglplot.umd.min.js"></script>
</head>
<body>
    <div>
        <canvas class="canvas" id="my_canvas"></canvas>
    </div>
    <script>
        const canvas = document.getElementById("my_canvas");
        const devicePixelRatio = window.devicePixelRatio || 1;
        canvas.width = canvas.clientWidth * devicePixelRatio;
        canvas.height = canvas.clientHeight * devicePixelRatio;


        let sps = 512;
        let nSec = 10;
        let nPointsRenderedPerSec = 128;
        const numX = nPointsRenderedPerSec*nSec;
        let colors = []; 
        let lines = []; 
        let offsetY = [];
        let nLines = 2;
        for(let i = 0; i < nLines; i++) {
            colors.push(
                new WebglPlotBundle.ColorRGBA(
                    Math.random()*.5+.5,
                    Math.random()*.5+.5,
                    Math.random()*.5+.5,
                    1
                )
            );
            lines.push(new WebglPlotBundle.WebglLine(colors[i],))
        }
        
        const color = new WebglPlotBundle.ColorRGBA(
            Math.random()*.5+.5,
            Math.random()*.5+.5,
            Math.random()*.5+.5,
            1
        );
        const line = new WebglPlotBundle.WebglLine(color, numX);
        const wglp = new WebglPlotBundle.WebglPlot(canvas);

        line.arrangeX();
        wglp.addLine(line);

        function newFrame() {
            update();
            wglp.update();
            requestAnimationFrame(newFrame);
        }
        requestAnimationFrame(newFrame);

        function update(sps=512) {
            const freq = 0.001;
            const amp = 0.5;
            const noise = 0.5;

            for (let i = 0; i < line.numPoints; i++) {
                const ySin = Math.sin(Math.PI * i * freq * Math.PI * 2 + (performance.now()*0.001));
                const yNoise = Math.random() - 0.5;
                line.setY(i, ySin * amp + yNoise * noise);
            }
        }

    </script>
</body>
